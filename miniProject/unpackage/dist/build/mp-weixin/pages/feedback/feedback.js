"use strict";const e=require("../../common/vendor.js"),o=require("../../uni_modules/wot-design-uni/components/wd-toast/index.js");require("../../uni_modules/wot-design-uni/locale/index.js");const n=require("../../utils/userStorage.js"),t=require("../../api/feedback.js");if(!Array){(e.resolveComponent("wd-navbar")+e.resolveComponent("wd-textarea")+e.resolveComponent("wd-upload")+e.resolveComponent("wd-input")+e.resolveComponent("wd-button")+e.resolveComponent("wd-toast"))()}Math||((()=>"../../uni_modules/wot-design-uni/components/wd-navbar/wd-navbar.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-textarea/wd-textarea.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-upload/wd-upload.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-input/wd-input.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-button/wd-button.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-toast/wd-toast.js"))();const s=e.defineComponent({__name:"feedback",setup(s){const a=o.useToast(),l=e.ref([]),i=e.ref({userId:0,imageList:[],content:"",relation:""}),d=()=>{e.index.navigateBack()};e.onLoad((()=>{const e=n.getUserInfo();e?i.value.userId=e.id:a.show({type:"warning",message:"请先登录"}),console.log(e)}));const u=e=>{console.log("files:",e),console.log(l.value),l.value=e},r=e=>{l.value.splice(e.index,1),i.value.imageList.splice(e.index,1),console.log("publishArticleParams>>>",i)},c=e=>{console.log("上传成功res",e.file.response);const o=JSON.parse(e.file.response);console.log("上传成功result.data",o.data),i.value.imageList.push(...o.data),console.log(i.value)},p=async()=>{200===(await t.addFeedBack(i.value)).code&&(a.show("提交成功~感谢您的反馈"),setTimeout((()=>{e.index.navigateBack()}),1e3)),console.log("提交反馈",i.value)};return e.onShareAppMessage((e=>(console.log(e),{title:"青春共享站",path:"/pages/index/index",imageUrl:"/static/logo.jpg"}))),e.onShareTimeline((()=>({title:"青春共享站",path:"/pages/index/index",imageUrl:"/static/logo.jpg"}))),(o,n)=>({a:e.o(d),b:e.p({"custom-class":"navbar",bordered:!1,title:"意见反馈",safeAreaInsetTop:!0,"left-arrow":!0}),c:e.o((e=>i.value.content=e)),d:e.p({placeholder:"请填写10个字以上内容，以便我们提供更好的内容",maxlength:2e3,placeholderStyle:"font-size:14px;","show-count":!0,clearable:!0,rows:5,modelValue:i.value.content}),e:e.sr("uploadFile","abc8b8ee-2"),f:e.o(u),g:e.o(c),h:e.o((e=>l.value=e)),i:e.p({multiple:!0,accept:"image",action:"https://campus.fybreeze.cn/api/article/uploadImages","before-remove":r,"file-list":l.value}),j:e.o((e=>i.value.relation=e)),k:e.p({type:"text","no-border":!0,placeholder:"输入手机号/邮箱",modelValue:i.value.relation}),l:e.o(p),m:e.p({"custom-class":"btn",type:"primary",block:!0})})}});s.__runtimeHooks=6;const a=e._export_sfc(s,[["__scopeId","data-v-abc8b8ee"]]);wx.createPage(a);
