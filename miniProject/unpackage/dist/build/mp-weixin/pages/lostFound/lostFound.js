"use strict";const e=require("../../common/vendor.js"),o=require("../../api/itemsApi.js"),n=require("../../utils/enum.js"),t=require("../../uni_modules/wot-design-uni/components/wd-toast/index.js");if(require("../../uni_modules/wot-design-uni/locale/index.js"),!Array){(e.resolveComponent("wd-search")+e.resolveComponent("wd-tag")+e.resolveComponent("wd-tab")+e.resolveComponent("wd-tabs")+e.resolveComponent("wd-icon")+e.resolveComponent("wd-toast")+e.resolveComponent("wd-loading"))()}Math||((()=>"../../uni_modules/wot-design-uni/components/wd-search/wd-search.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-tag/wd-tag.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-tab/wd-tab.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-tabs/wd-tabs.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-icon/wd-icon.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-toast/wd-toast.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-loading/wd-loading.js"))();const s=e.defineComponent({__name:"lostFound",setup(s,{expose:l}){const a=t.useToast(),i=e.ref("lost"),r=e.ref(!1),d=e.ref([]),u=e.ref({current:1,size:10,itemType:n.ItemType.LOST}),c=e.ref(!1),p=async()=>{try{r.value=!0;const e=await o.getItemsList(u.value);200===e.code?d.value=e.data.records:a.error(e.message||"获取数据失败")}catch(e){console.error("获取列表错误:",e),a.error("获取数据失败")}finally{r.value=!1}};e.watch((()=>i.value),(e=>{var o;o=e,u.value={...u.value,current:1,itemType:"lost"===o?n.ItemType.LOST:n.ItemType.FOUND},p()})),e.onMounted((()=>{p()}));const g=(o=1)=>{console.log("发布类型:",o),e.index.navigateTo({url:`/pages/lostFoundPublish/lostFoundPublish?type=${o}`})};return e.onShow((()=>{console.log("onShow triggered, needRefresh:",c.value),c.value&&(u.value={...u.value,current:1},d.value=[],p(),c.value=!1)})),l({setNeedRefresh:()=>{console.log("设置刷新标记"),c.value=!0}}),e.onShareAppMessage((e=>(console.log(e),{title:"青春共享站",path:"/pages/index/index",imageUrl:"/static/logo.jpg"}))),e.onShareTimeline((()=>({title:"青春共享站",path:"/pages/index/index",imageUrl:"/static/logo.jpg"}))),(o,n)=>e.e({a:e.o((e=>g(1))),b:e.o((e=>g(2))),c:e.p({placeholder:"请输入物品名称","placeholder-left":!0,"cancel-txt":"搜索"}),d:e.p({round:!0,color:"#333","bg-color":"#808080",plain:!0}),e:e.p({round:!0,color:"#333","bg-color":"#808080",plain:!0}),f:e.p({round:!0,color:"#333","bg-color":"#808080",plain:!0}),g:e.p({round:!0,color:"#333","bg-color":"#808080",plain:!0}),h:e.p({round:!0,color:"#333","bg-color":"#808080",plain:!0}),i:e.p({round:!0,color:"#333","bg-color":"#808080",plain:!0}),j:e.p({round:!0,color:"#333","bg-color":"#808080",plain:!0}),k:e.p({title:"寻物启事",name:"lost"}),l:e.p({title:"招领启事",name:"found"}),m:e.o((e=>i.value=e)),n:e.p({modelValue:i.value}),o:e.f(d.value,((o,n,t)=>({a:e.t(o.title),b:e.t(1===o.status?"已解决":"未解决"),c:e.n(1===o.status?"resolved":"pending"),d:e.t(o.description),e:"544e40d4-11-"+t,f:e.t(o.location),g:"544e40d4-12-"+t,h:e.t(o.eventTime),i:"544e40d4-13-"+t,j:e.t(o.category),k:o.id,l:e.o((n=>{return t=o.id,console.log(t),void e.index.navigateTo({url:`/pages/lostFoundDetail/lostFoundDetail?id=${t}`});var t}),o.id)}))),p:e.p({name:"location",size:"28rpx"}),q:e.p({name:"time",size:"28rpx"}),r:e.p({name:"category",size:"28rpx"}),s:r.value},(r.value,{}))}});s.__runtimeHooks=6;const l=e._export_sfc(s,[["__scopeId","data-v-544e40d4"]]);wx.createPage(l);
