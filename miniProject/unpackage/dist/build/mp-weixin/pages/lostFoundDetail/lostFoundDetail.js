"use strict";const e=require("../../common/vendor.js"),o=require("../../api/itemsApi.js"),n=require("../../api/uploadApi.js"),s=require("../../utils/userStorage.js"),l=require("../../uni_modules/wot-design-uni/components/wd-toast/index.js");if(require("../../uni_modules/wot-design-uni/locale/index.js"),!Array){(e.resolveComponent("wd-icon")+e.resolveComponent("wd-swiper")+e.resolveComponent("wd-img")+e.resolveComponent("wd-button")+e.resolveComponent("wd-upload")+e.resolveComponent("wd-textarea")+e.resolveComponent("wd-overlay")+e.resolveComponent("wd-toast"))()}Math||((()=>"../../uni_modules/wot-design-uni/components/wd-icon/wd-icon.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-swiper/wd-swiper.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-img/wd-img.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-button/wd-button.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-upload/wd-upload.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-textarea/wd-textarea.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-overlay/wd-overlay.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-toast/wd-toast.js"))();const t=e.defineComponent({__name:"lostFoundDetail",setup(t){const i=e.ref(!1);e.ref("");const a=l.useToast(),u=e.ref({}),d=e.ref([]),r=e.ref({urlList:[],userId:0,description:"",foundItemId:0}),c=e=>{console.log("files:",e),console.log(d.value),d.value=e},p=e=>{const o=r.value.urlList[e.index];console.log("删除前置处理",o),n.deleteFile(o).then((o=>{200===o.code?(console.log("删除成功",o),d.value.splice(e.index,1),r.value.urlList.splice(e.index,1),console.log("paramsMatch>>>",r)):console.log("删除失败",o)}))},m=e=>{console.log("上传成功res",e.file.response);const o=JSON.parse(e.file.response);console.log("上传成功result.data",o.data),r.value.urlList.push(...o.data),console.log(r.value)},v=async()=>{console.log(r.value);const n=await o.addMatchRecords(r.value);200===n.code?(console.log(n),a.success({msg:"等待对方审核~",zIndex:1e3,cover:!0}),setTimeout((()=>{e.index.navigateBack()}),1e3)):a.error({msg:n.message,zIndex:1e3,cover:!0})};function g(e){}function w(e){}return e.onLoad((e=>{console.log(e),(async e=>{console.log(e);const n=await o.getItemsById(e);200===n.code?(console.log(n.data),u.value=n.data):console.log(n.message)})(e.id),r.value.foundItemId=e.id,r.value.userId=s.getUserInfo().id})),e.onShareAppMessage((e=>(console.log(e),{title:"青春共享站",path:"/pages/index/index",imageUrl:"/static/logo.jpg"}))),e.onShareTimeline((()=>({title:"青春共享站",path:"/pages/index/index",imageUrl:"/static/logo.jpg"}))),(o,n)=>{var s,l,t,a,f,x,h;return e.e({a:e.t(u.value.title),b:e.t(u.value.eventTime),c:e.p({name:"discount",size:"18px",color:"#b0a0e6"}),d:e.t(u.value.category),e:e.p({name:"view",size:"18px",color:"#b0a0e6"}),f:e.p({name:"location",size:"18px",color:"#b0a0e6"}),g:e.t(u.value.location),h:0!=(null==(s=u.value.url)?void 0:s.length)},0!=(null==(l=u.value.url)?void 0:l.length)?{i:e.o(g),j:e.o(w),k:e.p({list:null==(t=u.value)?void 0:t.url,indicator:{type:"fraction"},autoplay:!0,indicatorPosition:"bottom-right"})}:{},{l:e.t(u.value.description),m:e.p({width:50,height:50,round:!0,src:null==(f=null==(a=u.value)?void 0:a.userVO)?void 0:f.imageUrl}),n:e.t(null==(h=null==(x=u.value)?void 0:x.userVO)?void 0:h.userName),o:e.o((e=>i.value=!0)),p:e.p({type:"primary"}),q:e.sr("uploadFile","a30c9aca-7,a30c9aca-6"),r:e.o(c),s:e.o(m),t:e.o((e=>d.value=e)),v:e.p({limit:6,multiple:!0,accept:"image",action:"https://campus.fybreeze.cn/api/article/uploadImages","before-remove":p,"file-list":d.value}),w:e.o((e=>r.value.description=e)),x:e.p({placeholder:"请填写物品的信息",modelValue:r.value.description}),y:e.o((e=>i.value=!1)),z:e.p({type:"info"}),A:e.o(v),B:e.o((()=>{})),C:e.o((e=>i.value=!1)),D:e.p({show:i.value})})}}});t.__runtimeHooks=6;const i=e._export_sfc(t,[["__scopeId","data-v-a30c9aca"]]);wx.createPage(i);
