"use strict";const e=require("../../common/vendor.js"),a=require("../../common/assets.js"),t=require("../../api/userApi.js"),s=require("../../uni_modules/wot-design-uni/components/wd-toast/index.js");require("../../uni_modules/wot-design-uni/locale/index.js");const n=require("../../utils/userStorage.js"),o=require("../../api/articleApi.js");if(!Array){(e.resolveComponent("wd-img")+e.resolveComponent("wd-icon")+e.resolveComponent("wd-tag")+e.resolveComponent("wd-button")+e.resolveComponent("wd-loading")+e.resolveComponent("wd-tab")+e.resolveComponent("wd-tabs")+e.resolveComponent("wd-toast"))()}Math||((()=>"../../uni_modules/wot-design-uni/components/wd-img/wd-img.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-icon/wd-icon.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-tag/wd-tag.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-button/wd-button.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-loading/wd-loading.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-tab/wd-tab.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-tabs/wd-tabs.js")+(()=>"../../uni_modules/wot-design-uni/components/wd-toast/wd-toast.js"))();const i=e.defineComponent({__name:"userDetail",setup(i){const l=s.useToast(),r=e.ref(null),u=e.ref([]),d=e.ref(1),m=e.ref(10),c=e.ref(0),g=e.ref(!1),p=e.ref(!1),v=e.ref("");e.onLoad((e=>{console.log(e),(null==e?void 0:e.userId)&&(v.value=e.userId,w(e.userId),f(e.userId))}));const w=async e=>{console.log(e);const a=await t.getUserVOById(e);console.log(a),200===a.code?r.value=a.data:l.error(a.message)},f=async e=>{if(!g.value&&!p.value)try{g.value=!0;const a=await o.getArticleList({pageNum:d.value,pageSize:m.value,userId:e});200===a.code?(1===d.value?u.value=a.data.records:u.value=[...u.value,...a.data.records],c.value=a.data.total,u.value.length>=c.value?p.value=!0:d.value++):l.error(a.message)}catch(a){console.error("获取文章列表失败:",a),l.error("获取文章列表失败")}finally{g.value=!1}},h=()=>{v.value&&f(v.value)},b=()=>{const e=n.getUserInfo();return e&&r.value?e.id===r.value.id?3:2:1},x=()=>{e.index.navigateTo({url:"/pages/updateUserInfo/updateUserInfo"})};return(t,s)=>{var n,o,i,l,d;return e.e({a:a._imports_0$1,b:e.p({width:"160rpx",height:"160rpx",round:!0,src:(null==(n=r.value)?void 0:n.imageUrl)||"/static/default-avatar.png"}),c:e.t((null==(o=r.value)?void 0:o.userName)||"未设置昵称"),d:null==(i=r.value)?void 0:i.gender},(null==(l=r.value)?void 0:l.gender)?{e:e.p({name:1===r.value.gender?"male":"female",color:1===r.value.gender?"#007AFF":"#FF69B4",size:"32rpx"})}:{},{f:e.p({type:"success",size:"small"}),g:e.p({type:"warning",size:"small"}),h:e.t((null==(d=r.value)?void 0:d.userProfile)||"这个人很懒，还没有填写简介~"),i:e.p({name:"location",size:"28rpx",color:"#666"}),j:e.p({plain:!0,size:"small"}),k:1==b()},1==b()?{l:e.p({name:"plus"}),m:e.p({type:"success",size:"small"})}:2==b()?{o:e.p({name:"check"}),p:e.p({type:"info",size:"small"})}:{q:e.p({name:"edit"}),r:e.o(x),s:e.p({type:"primary",size:"small"})},{n:2==b(),t:0===u.value.length},0===u.value.length?{v:e.p({name:"comment",size:"80rpx",color:"#ccc"})}:e.e({w:e.f(u.value,((a,t,s)=>e.e({a:"4887aa7b-15-"+s+",4887aa7b-13",b:e.p({width:"60rpx",height:"60rpx",round:!0,src:a.userVO.imageUrl}),c:e.t(a.userVO.userName),d:e.t(a.createTime),e:e.t(a.content),f:a.imagesList&&a.imagesList.length>0},a.imagesList&&a.imagesList.length>0?{g:e.f(a.imagesList,((t,s,n)=>({a:s,b:t,c:e.o((t=>{return n=a.imagesList,o=s,void e.index.previewImage({urls:n,current:n[o]});var n,o}),s)}))),h:1===a.imagesList.length?1:"",i:2===a.imagesList.length?1:"",j:a.imagesList.length>2?1:"",k:e.n(`image-count-${a.imagesList.length}`)}:{},{l:"4887aa7b-16-"+s+",4887aa7b-13",m:e.t(a.viewCount),n:e.n(a.isLike?"t-icon t-icon-like-selected":"t-icon t-icon-like"),o:e.t(a.likeCount),p:"4887aa7b-17-"+s+",4887aa7b-13",q:e.t(a.commentCount),r:a.tags&&a.tags.length>0},a.tags&&a.tags.length>0?{s:e.f(a.tags,((a,t,n)=>({a:e.t(a),b:a,c:"4887aa7b-18-"+s+"-"+n+",4887aa7b-13"}))),t:e.p({type:"info",size:"small"})}:{},{v:a.id,w:e.o((t=>{return s=a.id,void e.index.navigateTo({url:`/pages/articleDetail/articleDetail?articleId=${s}`});var s}),a.id)}))),x:e.p({name:"view",size:"28rpx",color:"#666"}),y:e.p({name:"chat",size:"28rpx",color:"#666"}),z:u.value.length>0},u.value.length>0?e.e({A:g.value},g.value?{B:e.p({size:"28rpx"})}:p.value?{}:{D:e.o(h)},{C:p.value}):{}),{E:e.p({title:"发表",badge:c.value}),F:e.p({name:"star",size:"80rpx",color:"#ccc"}),G:e.p({title:"收藏",badge:1}),H:e.p({slidable:"always",animated:!0,"auto-line-width":!0,sticky:!0,"offset-top":"0"})})}}});wx.createPage(i);
