"use strict";const e=require("../../../../common/vendor.js"),o=require("../composables/usePopover.js"),n=require("../common/clickoutside.js"),t=require("../composables/useQueue.js"),s=require("./types.js"),r=require("../common/util.js");Math||(c+u)();const c=()=>"../wd-icon/wd-icon.js",u=()=>"../wd-transition/wd-transition.js",l=e.defineComponent({name:"wd-popover",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:s.popoverProps,emits:["update:modelValue","menuclick","change","open","close"],setup(s,{expose:c,emit:u}){const l=s,a=u,p=e.inject(t.queueKey,null),i="popover",{proxy:m}=e.getCurrentInstance(),d=o.usePopover(l.visibleArrow),v=e.ref(!1);function f(e){y(!1),a("menuclick",{item:l.content[e],index:e})}function w(){l.disabled||y(!v.value)}function y(e){v.value=e,a("update:modelValue",e)}return e.watch((()=>l.content),(e=>{const{mode:o}=l;"normal"===o&&"string"!=typeof e?console.error("The value type must be a string type in normal mode"):"menu"!==o||r.isArray(e)||console.error("The value type must be a Array type in menu mode")})),e.watch((()=>l.placement),(()=>{d.init(l.placement,l.visibleArrow,i)})),e.watch((()=>l.modelValue),(e=>{v.value=e})),e.watch((()=>v.value),(e=>{e&&(d.control(l.placement,l.offset),p&&p.closeOther?p.closeOther(m):n.closeOther(m)),d.showStyle.value=e?"display: inline-block;":"display: none;",a("change",{show:e}),a(""+(e?"open":"close"))})),e.onMounted((()=>{d.init(l.placement,l.visibleArrow,i)})),e.onBeforeMount((()=>{p&&p.pushToQueue?p.pushToQueue(m):n.pushToQueue(m),d.showStyle.value=v.value?"opacity: 1;":"opacity: 0;"})),e.onBeforeUnmount((()=>{p&&p.removeFromQueue?p.removeFromQueue(m):n.removeFromQueue(m)})),c({open:function(){y(!0)},close:function(){y(!1)}}),(o,n)=>e.e({a:!o.useContentSlot&&"normal"===o.mode},o.useContentSlot||"normal"!==o.mode?{}:{b:e.t(o.content)},{c:!o.useContentSlot&&"menu"===o.mode&&"object"==typeof o.content},o.useContentSlot||"menu"!==o.mode||"object"!=typeof o.content?{}:{d:e.f(o.content,((o,n,t)=>e.e({a:o.iconClass},o.iconClass?{b:"b650786f-0-"+t,c:e.p({name:o.iconClass,"custom-class":"wd-popover__icon"})}:{},{d:e.t(o.content),e:n,f:e.o((e=>f(n)),n)})))},{e:e.n(`wd-popover__container ${o.customPop}`),f:l.visibleArrow},l.visibleArrow?{g:e.n(`wd-popover__arrow ${e.unref(d).arrowClass.value} ${o.customArrow}`),h:e.s(e.unref(d).arrowStyle.value)}:{},{i:!o.useContentSlot&&"normal"===o.mode},o.useContentSlot||"normal"!==o.mode?{}:{j:e.t(o.content)},{k:!o.useContentSlot&&"menu"===o.mode},o.useContentSlot||"menu"!==o.mode?{}:{l:e.f(o.content,((o,n,t)=>e.e({a:"object"==typeof o&&o.iconClass},"object"==typeof o&&o.iconClass?{b:"b650786f-2-"+t+",b650786f-1",c:e.p({name:o.iconClass,"custom-class":"wd-popover__icon"})}:{},{d:e.t("object"==typeof o&&o.content?o.content:""),e:n,f:e.o((e=>f(n)),n),g:e.s(0===n?"border-top: none":"")})))},{m:e.n(`wd-popover__container ${o.customPop}`),n:o.showClose},o.showClose?{o:e.o(w),p:e.p({name:"close","custom-class":"wd-popover__close-icon"})}:{},{q:e.p({"custom-class":"wd-popover__pos","custom-style":e.unref(d).popStyle.value,show:v.value,name:"fade",duration:200}),r:e.o(w),s:e.n(`wd-popover ${o.customClass}`),t:e.s(o.customStyle),v:e.o(((...o)=>e.unref(d).noop&&e.unref(d).noop(...o)))})}}),a=e._export_sfc(l,[["__scopeId","data-v-b650786f"]]);wx.createComponent(a);
