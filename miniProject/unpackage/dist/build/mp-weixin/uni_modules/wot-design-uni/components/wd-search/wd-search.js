"use strict";const e=require("../../../../common/vendor.js"),a=require("../common/util.js"),l=require("../composables/useTranslate.js"),u=require("./types.js");Math||c();const c=()=>"../wd-icon/wd-icon.js",s=e.defineComponent({name:"wd-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:u.searchProps,emits:["update:modelValue","change","clear","search","focus","blur","cancel"],setup(u,{emit:c}){const s=u,o=c,{translate:t}=l.useTranslate("search"),r=e.ref(!1),n=e.ref(!1),d=e.ref(""),v=e.ref(!0),i=e.ref(!1);e.watch((()=>s.modelValue),(e=>{d.value=e,e&&(n.value=!0)}),{immediate:!0}),e.watch((()=>s.focus),(e=>{if(e){if(s.disabled)return;m()}})),e.onMounted((()=>{s.focus&&m()}));const h=e.computed((()=>`wd-search  ${s.light?"is-light":""}  ${s.hideCancel?"is-without-cancel":""} ${s.customClass}`)),p=e.computed((()=>{const e={display:""===d.value&&v.value?"flex":"none"};return a.objToStyle(e)}));async function f(e){n.value=e,await a.pause(),r.value=e}async function m(){s.disabled||(await a.pause(100),v.value=!1,f(!0))}function w(e){d.value=e.detail.value,o("update:modelValue",e.detail.value),o("change",{value:e.detail.value})}async function _(){d.value="",i.value=!0,s.focusWhenClear&&(r.value=!1),await a.pause(100),s.focusWhenClear?(v.value=!1,f(!0)):(v.value=!0,f(!1)),o("change",{value:""}),o("update:modelValue",""),o("clear")}function C({detail:{value:e}}){o("search",{value:e})}function b(){i.value?i.value=!1:(v.value=!1,o("focus",{value:d.value}))}function y(){i.value||(v.value=!d.value,n.value=!v.value,r.value=!1,o("blur",{value:d.value}))}function x(){o("cancel",{value:d.value})}return(a,l)=>e.e({a:!a.placeholderLeft},a.placeholderLeft?{}:{b:e.p({name:"search","custom-class":"wd-search__search-icon"}),c:e.t(a.placeholder||e.unref(t)("search")),d:e.n(`wd-search__placeholder-txt ${a.placeholderClass}`),e:e.s(p.value),f:e.o(m)},{g:n.value||d.value||a.placeholderLeft},n.value||d.value||a.placeholderLeft?{h:e.p({name:"search","custom-class":"wd-search__search-left-icon"})}:{},{i:n.value||d.value||a.placeholderLeft},n.value||d.value||a.placeholderLeft?{j:a.placeholder||e.unref(t)("search"),k:`wd-search__placeholder-txt ${a.placeholderClass}`,l:a.placeholderStyle,m:e.n(a.customInputClass),n:e.o(b),o:e.o([e=>d.value=e.detail.value,w]),p:e.o(y),q:e.o(C),r:a.disabled,s:a.maxlength,t:r.value,v:d.value}:{},{w:d.value},d.value?{x:e.o(_),y:e.p({"custom-class":"wd-search__clear wd-search__clear-icon",name:"error-fill"})}:{},{z:!a.hideCancel},a.hideCancel?{}:{A:e.t(a.cancelTxt||e.unref(t)("cancel")),B:e.o(x)},{C:e.n(h.value),D:e.s(a.customStyle)})}}),o=e._export_sfc(s,[["__scopeId","data-v-2e21c7fb"]]);wx.createComponent(o);
