"use strict";const e=require("../../../../common/vendor.js"),t=require("../common/util.js"),i=require("./types.js"),s=e.defineComponent({name:"wd-segmented",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:i.segmentedProps,emits:["update:value","change","click"],setup(i,{expose:s,emit:n}){const a=i,o=n,d=e.reactive({activeIndex:0,activeStyle:""}),l=e.computed((()=>a.disabled||!(!a.options[0]||!t.isObj(a.options[0]))&&a.options[0].disabled));e.watch((()=>a.value),(()=>{r(),u(),a.vibrateShort&&e.index.vibrateShort({})}),{immediate:!1});const{proxy:c}=e.getCurrentInstance();function u(e=!0){t.getRect(".wd-segmented__item",!0,c).then((i=>{const s=i[d.activeIndex],n={position:"absolute",width:t.addUnit(s.width),"z-index":0},a=i.slice(0,d.activeIndex).reduce(((e,t)=>e+Number(t.width)),0);a&&(n.transform=`translateX(${a}px)`),e&&(n.transition="all 0.2s cubic-bezier(0.645, 0.045, 0.355, 1)"),d.activeStyle=t.objToStyle(n)}))}function r(){const e=a.options.findIndex((e=>(t.isObj(e)?e.value:e)==a.value));if(e>=0)d.activeIndex=e;else{const e=t.isObj(a.options[0])?a.options[0].value:a.options[0];o("update:value",e),o("change",t.isObj(a.options[0])?a.options[0]:{value:e})}}return e.onMounted((async()=>{r(),await t.pause(),u(!1)})),s({updateActiveStyle:u}),(i,s)=>({a:e.f(i.options,((s,n,l)=>e.e(i.$slots.label?{a:"label-"+l,b:e.r("label",{option:e.unref(t.isObj)(s)?s:{value:s}},l)}:{c:e.t(e.unref(t.isObj)(s)?s.value:s)},{d:e.n(`wd-segmented__item is-${i.size} ${d.activeIndex===n?"is-active":""} ${i.disabled||e.unref(t.isObj)(s)&&s.disabled?"is-disabled":""}`),e:e.o((e=>function(e,i){if(a.disabled||t.isObj(e)&&e.disabled)return;const s=t.isObj(e)?e.value:e;d.activeIndex=i,u(),o("update:value",s),o("change",t.isObj(e)?e:{value:s}),o("click",t.isObj(e)?e:{value:s})}(s,n)),n),f:n}))),b:i.$slots.label,c:e.n("wd-segmented__item--active "+(l.value?"is-disabled":"")),d:e.s(d.activeStyle),e:e.n(`wd-segmented ${i.customClass}`),f:e.s(i.customStyle)})}}),n=e._export_sfc(s,[["__scopeId","data-v-3730c46c"]]);wx.createComponent(n);
