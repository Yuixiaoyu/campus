"use strict";const e=require("../../../../common/vendor.js"),t=require("../common/util.js"),o=require("./types.js");Math||i();const i=()=>"../wd-swiper-nav/wd-swiper-nav.js",n=e.defineComponent({name:"wd-swiper",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:o.swiperProps,emits:["click","change","animationfinish","update:current"],setup(o,{emit:i}){const n=o,s=i,u=e.ref(n.current),a=e.ref(n.current),r=(e,t=!1)=>{a.value=e,t&&(u.value=e),s("update:current",e)},l=e.ref(!1),{proxy:c}=e.getCurrentInstance(),d=e.ref(t.uuid());e.watch((()=>n.current),(e=>{e<0?n.loop?h():f():e>=n.list.length?n.loop?f():h():m(e)}));const p=e.computed((()=>{const{list:e,direction:o,indicatorPosition:i,indicator:s}=n,u={current:a.value||0,total:e.length||0,direction:o||"horizontal",indicatorPosition:i||"bottom"};return t.isObj(s)&&(u.type=s.type||"dots",u.minShowNum=s.minShowNum||2,u.showControls=s.showControls||!1),u})),v=e=>((e,o)=>{const i=e=>"video"===o?t.isVideoUrl(e):t.isImageUrl(e);return t.isObj(e)?e.type&&["video","image"].includes(e.type)?e.type===o:i(e[n.valueKey]):i(e)})(e,"video");function m(e){e!==a.value&&r(e,!0)}function f(){m(0)}function h(){m(n.list.length-1)}function g(){n.stopAutoplayWhenVideoPlay&&(l.value=!0)}function y(){l.value=!1}function w(e,t,o){let i="";return function(e,t,o){return(e-1+o.length)%o.length===t}(e,t,o)&&(i=n.customPrevClass||n.customPrevImageClass),function(e,t,o){return(e+1+o.length)%o.length===t}(e,t,o)&&(i=n.customNextClass||n.customNextImageClass),i}function x(o){const{current:i,source:u}=o.detail,l=a.value;if(s("change",{current:i,source:u}),i!==a.value){r(i,"autoplay"===u||"touch"===u)}!function(o,i){(function(o){if(n.stopPreviousVideo){const i=n.list[o];if(t.isDef(i)&&v(i)){e.index.createVideoContext(`video-${o}-${d.value}`,c).pause()}}else n.stopAutoplayWhenVideoPlay&&y()})(o),function(o){if(n.autoplayVideo){const i=n.list[o];if(t.isDef(i)&&v(i)){e.index.createVideoContext(`video-${o}-${d.value}`,c).play()}}}(i)}(l,i)}function C(e){const{current:t,source:o}=e.detail;if(t!==a.value){r(t,"autoplay"===o||"touch"===o)}s("animationfinish",{current:t,source:o})}function j(e,t){s("click",{index:e,item:t})}function $({dir:e}){const{list:t,loop:o}=n,i=t.length;let s="next"===e?a.value+1:a.value-1;s=o?"next"===e?(a.value+1)%i:(a.value-1+i)%i:s<0||s>=i?a.value:s,s!==a.value&&m(s)}return(o,i)=>e.e({a:e.f(o.list,((i,n,s)=>e.e({a:v(i)},v(i)?{b:`video-${n}-${d.value}`,c:e.unref(t.addUnit)(o.height),d:e.unref(t.isObj)(i)?i[o.valueKey]:i,e:e.unref(t.isObj)(i)?i.poster:"",f:e.n(`wd-swiper__video ${o.customItemClass} ${w(a.value,n,o.list)}`),g:e.o(g,n),h:e.o(y,n),i:o.videoLoop,j:o.muted,k:o.autoplayVideo,l:e.o((e=>j(n,i)),n)}:{m:e.unref(t.isObj)(i)?i[o.valueKey]:i,n:e.n(`wd-swiper__image ${o.customImageClass} ${o.customItemClass} ${w(a.value,n,o.list)}`),o:e.unref(t.addUnit)(o.height),p:o.imageMode,q:e.o((e=>j(n,i)),n)},{r:e.unref(t.isObj)(i)&&i[o.textKey]},e.unref(t.isObj)(i)&&i[o.textKey]?{s:e.t(i[o.textKey]),t:e.n(`wd-swiper__text ${o.customTextClass}`),v:e.s(o.customTextStyle)}:{},{w:n}))),b:o.adjustHeight,c:o.adjustVerticalHeight,d:o.autoplay&&!l.value,e:u.value,f:o.interval,g:o.duration,h:o.loop,i:"vertical"==o.direction,j:o.easingFunction,k:e.unref(t.addUnit)(o.previousMargin),l:e.unref(t.addUnit)(o.nextMargin),m:o.snapToEdge,n:o.displayMultipleItems,o:e.unref(t.addUnit)(o.height),p:e.o(x),q:e.o(C),r:o.indicator},o.indicator?e.e({s:e.r("indicator",{current:a.value,total:o.list.length}),t:!o.$slots.indicator},o.$slots.indicator?{}:{v:e.o($),w:e.p({"custom-class":o.customIndicatorClass,type:p.value.type,current:p.value.current,total:p.value.total,direction:p.value.direction,"indicator-position":p.value.indicatorPosition,"min-show-num":p.value.minShowNum,"show-controls":p.value.showControls})}):{},{x:e.n(`wd-swiper ${o.customClass}`),y:e.s(o.customStyle)})}}),s=e._export_sfc(n,[["__scopeId","data-v-8c46ba48"]]);wx.createComponent(s);
