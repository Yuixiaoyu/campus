"use strict";const e=require("../common/vendor.js"),t={"Content-Type":"application/json;charset=UTF-8",Authorization:"Basic c2FiZXI6c2FiZXJfc2VjcmV0"};exports.request=o=>{let a=o.url,n=o.method||"GET",r=o.data||{},s=o.enableChunked||!1,i={"sa-Token":e.index.getStorageSync("token")||"",...t,...o.header};return new Promise(((t,o)=>{e.index.request({url:"https://campus.fybreeze.cn"+a,method:n,header:i,data:r,enableChunked:s,withCredentials:!0,success(o){const a=o;if(200===a.data.code)t(a.data);else switch(a.data.code){case 40100:e.index.clearStorageSync(),e.index.showModal({title:"提示",content:"请登录",showCancel:!1,success(){setTimeout((()=>{e.index.reLaunch({url:"/pages/login/login"})}),1e3)}});break;case 40400:e.index.showToast({title:"请求地址不存在...",icon:"error",duration:2e3});break;default:e.index.showToast({title:a.data.message,icon:"error",duration:2e3})}},fail(t){console.log(t),t.errMsg.includes("request:fail")?e.index.showToast({title:"网络异常",icon:"error",duration:2e3}):e.index.showToast({title:"未知异常",icon:"error",duration:2e3}),o(t)},complete(){}})}))};
