{"remainingRequest":"G:\\Code\\campus\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js!G:\\Code\\campus\\vue-admin-template\\src\\store\\modules\\user.js","dependencies":[{"path":"G:\\Code\\campus\\vue-admin-template\\src\\store\\modules\\user.js","mtime":1742378308812},{"path":"G:\\Code\\campus\\vue-admin-template\\babel.config.js","mtime":1742370567530},{"path":"G:\\Code\\campus\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742551614966},{"path":"G:\\Code\\campus\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1742551616278}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCB7IHVzZXJMb2dpblVzaW5nUG9zdCwgZ2V0TG9naW5Vc2VyVXNpbmdHZXQgfSBmcm9tICdAL2FwaS91c2VyQ29udHJvbGxlcic7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgeyByZXNldFJvdXRlciB9IGZyb20gJ0Avcm91dGVyJzsKdmFyIGdldERlZmF1bHRTdGF0ZSA9IGZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZSgpIHsKICByZXR1cm4gewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAnJywKICAgIGF2YXRhcjogJycsCiAgICB1c2VySW5mbzogbnVsbAogIH07Cn07CnZhciBzdGF0ZSA9IGdldERlZmF1bHRTdGF0ZSgpOwp2YXIgbXV0YXRpb25zID0gewogIFJFU0VUX1NUQVRFOiBmdW5jdGlvbiBSRVNFVF9TVEFURShzdGF0ZSkgewogICAgT2JqZWN0LmFzc2lnbihzdGF0ZSwgZ2V0RGVmYXVsdFN0YXRlKCkpOwogIH0sCiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX05BTUU6IGZ1bmN0aW9uIFNFVF9OQU1FKHN0YXRlLCBuYW1lKSB7CiAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICB9LAogIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogIH0sCiAgU0VUX1VTRVJfSU5GTzogZnVuY3Rpb24gU0VUX1VTRVJfSU5GTyhzdGF0ZSwgdXNlckluZm8pIHsKICAgIHN0YXRlLnVzZXJJbmZvID0gdXNlckluZm87CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyDnlKjmiLfnmbvlvZUKICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgdXNlckluZm8pIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHZhciB1c2VyQWNjb3VudCA9IHVzZXJJbmZvLnVzZXJBY2NvdW50LAogICAgICB1c2VyUGFzc3dvcmQgPSB1c2VySW5mby51c2VyUGFzc3dvcmQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICB1c2VyTG9naW5Vc2luZ1Bvc3QoewogICAgICAgIHVzZXJBY2NvdW50OiB1c2VyQWNjb3VudC50cmltKCksCiAgICAgICAgdXNlclBhc3N3b3JkOiB1c2VyUGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCBkYXRhLnRva2VuKTsKICAgICAgICBzZXRUb2tlbihkYXRhLnRva2VuKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyDojrflj5bnlKjmiLfkv6Hmga8KICBnZXRJbmZvOiBmdW5jdGlvbiBnZXRJbmZvKF9yZWYyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgZ2V0TG9naW5Vc2VyVXNpbmdHZXQoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBpZiAoIWRhdGEpIHsKICAgICAgICAgIHJldHVybiByZWplY3QoJ+mqjOivgeWksei0pSzor7fph43mlrDnmbvlvZUuJyk7CiAgICAgICAgfQogICAgICAgIGNvbW1pdCgnU0VUX1VTRVJfSU5GTycsIGRhdGEpOwogICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCBkYXRhLnVzZXJOYW1lKTsKICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBkYXRhLmltYWdlVXJsKTsKICAgICAgICByZXNvbHZlKGRhdGEpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8g55So5oi355m75Ye6CiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICByZW1vdmVUb2tlbigpOyAvLyDlv4XpobvlhYjliKDpmaR0b2tlbgogICAgICByZXNldFJvdXRlcigpOwogICAgICBjb21taXQoJ1JFU0VUX1NUQVRFJyk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0sCiAgLy8g6YeN572uIHRva2VuCiAgcmVzZXRUb2tlbjogZnVuY3Rpb24gcmVzZXRUb2tlbihfcmVmNCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICByZW1vdmVUb2tlbigpOyAvLyDlv4XpobvlhYjliKDpmaR0b2tlbgogICAgICBjb21taXQoJ1JFU0VUX1NUQVRFJyk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"names":["userLoginUsingPost","getLoginUserUsingGet","getToken","setToken","removeToken","resetRouter","getDefaultState","token","name","avatar","userInfo","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","SET_USER_INFO","actions","login","_ref","commit","userAccount","userPassword","Promise","resolve","reject","trim","then","response","data","catch","error","getInfo","_ref2","userName","imageUrl","logout","_ref3","resetToken","_ref4","namespaced"],"sources":["G:/Code/campus/vue-admin-template/src/store/modules/user.js"],"sourcesContent":["import { userLoginUsingPost, getLoginUserUsingGet } from '@/api/userController'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport { resetRouter } from '@/router'\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    avatar: '',\n    userInfo: null\n  }\n}\n\nconst state = getDefaultState()\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_USER_INFO: (state, userInfo) => {\n    state.userInfo = userInfo\n  }\n}\n\nconst actions = {\n  // 用户登录\n  login({ commit }, userInfo) {\n    const { userAccount, userPassword } = userInfo\n    return new Promise((resolve, reject) => {\n      userLoginUsingPost({ userAccount: userAccount.trim(), userPassword: userPassword })\n        .then(response => {\n          const { data } = response\n          commit('SET_TOKEN', data.token)\n          setToken(data.token)\n          resolve()\n        })\n        .catch(error => {\n          reject(error)\n        })\n    })\n  },\n\n  // 获取用户信息\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getLoginUserUsingGet()\n        .then(response => {\n          const { data } = response\n\n          if (!data) {\n            return reject('验证失败,请重新登录.')\n          }\n\n          commit('SET_USER_INFO', data)\n          commit('SET_NAME', data.userName)\n          commit('SET_AVATAR', data.imageUrl)\n\n          resolve(data)\n        })\n        .catch(error => {\n          reject(error)\n        })\n    })\n  },\n\n  // 用户登出\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      removeToken() // 必须先删除token\n      resetRouter()\n      commit('RESET_STATE')\n      resolve()\n    })\n  },\n\n  // 重置 token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken() // 必须先删除token\n      commit('RESET_STATE')\n      resolve()\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n"],"mappings":"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","ignoreList":[]}]}