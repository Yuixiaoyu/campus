{"remainingRequest":"G:\\Code\\campus\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\Code\\campus\\vue-admin-template\\src\\views\\activity\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"G:\\Code\\campus\\vue-admin-template\\src\\views\\activity\\index.vue","mtime":1742645853565},{"path":"G:\\Code\\campus\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742551614966},{"path":"G:\\Code\\campus\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1742551616278},{"path":"G:\\Code\\campus\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742551614966},{"path":"G:\\Code\\campus\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1742551616768}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHB1Ymxpc2hBY3Rpdml0eVVzaW5nUG9zdCwgZ2V0QWN0aXZpdHlMaXN0VXNpbmdQb3N0LCB1cGRhdGVBY3Rpdml0eVVzaW5nUG9zdCwgcmVtb3ZlQWN0aXZpdHlVc2luZ1Bvc3QgfSBmcm9tICdAL2FwaS9hY3Rpdml0eUNvbnRyb2xsZXInCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQWN0aXZpdHknLAogIGZpbHRlcnM6IHsKICAgIC8vIOaWh+acrOi2hei/hzIw5Liq5a2X56ym5pi+56S655yB55Wl5Y+3CiAgICBlbGxpcHNpcyh2YWx1ZSkgewogICAgICBpZiAoIXZhbHVlKSByZXR1cm4gJycKICAgICAgaWYgKHZhbHVlLmxlbmd0aCA+IDIwKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlLnNsaWNlKDAsIDIwKSArICcuLi4nCiAgICAgIH0KICAgICAgcmV0dXJuIHZhbHVlCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoewogICAgICB1c2VySW5mbzogc3RhdGUgPT4gc3RhdGUudXNlci51c2VySW5mbwogICAgfSkKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGlhbG9nVGl0bGU6ICflj5HluIPmtLvliqgnLAogICAgICBhY3Rpdml0eUxpc3Q6IFtdLCAvLyDmtLvliqjliJfooajmlbDmja4KICAgICAgdG90YWw6IDAsCiAgICAgIGxpc3RMb2FkaW5nOiB0cnVlLAogICAgICBsaXN0UXVlcnk6IHsKICAgICAgICBjdXJyZW50OiAxLAogICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICB0aXRsZTogdW5kZWZpbmVkLAogICAgICAgIHR5cGU6IHVuZGVmaW5lZCwKICAgICAgICBwcm9maWxlOiB1bmRlZmluZWQsCiAgICAgICAgb3JnYW5pemVyOiB1bmRlZmluZWQsCiAgICAgICAgdGFyZ2V0VXNlcnM6IHVuZGVmaW5lZCwKICAgICAgICBzdGFydFRpbWU6IHVuZGVmaW5lZCwKICAgICAgICBlbmRUaW1lOiB1bmRlZmluZWQKICAgICAgfSwKICAgICAgCiAgICAgIC8vIOa0u+WKqOexu+WIq+mAiemhuQogICAgICBhY3Rpdml0eVR5cGVzOiBbJ+S9k+iCsuexuycsICflrabmnK/nsbsnLCAn6Im65pyv57G7JywgJ+acjeWKoeexuyddLAogICAgICAKICAgICAgLy8g5rS75Yqo5a+56LGh6YCJ6aG5CiAgICAgIHRhcmdldEF1ZGllbmNlT3B0aW9uczogWyflhajkvZPluIjnlJ8nLCAn5pys56eR55SfJywgJ+eglOeptueUnycsICfmlZnogYzlt6UnXSwKICAgICAgCiAgICAgIC8vIOihqOWNleaVsOaNrgogICAgICBhY3Rpdml0eUZvcm06IHsKICAgICAgICBpZDogdW5kZWZpbmVkLAogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBwcm9maWxlOiAnJywKICAgICAgICBjYXRlZ29yeTogJycsCiAgICAgICAgdXNlcklkOiAnJywKICAgICAgICBjb3ZlclBpY3R1cmU6ICcnLAogICAgICAgIG9yZ2FuaXplcnM6ICcnLAogICAgICAgIHBvc2l0aW9uOiAnJywKICAgICAgICBtYXhTaWdudXBzOiAxMDAsCiAgICAgICAgdGFyZ2V0VXNlcnM6ICcnLAogICAgICAgIHRpbWVSYW5nZTogW10KICAgICAgfSwKICAgICAgCiAgICAgIC8vIOihqOWNlemqjOivgeinhOWImQogICAgICBydWxlczogewogICAgICAgIHRpdGxlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpea0u+WKqOagh+mimCcsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICBjYXRlZ29yeTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nmtLvliqjnsbvliKsnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XSwKICAgICAgICBvcmdhbml6ZXJzOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeS4u+WKnuWNleS9jeWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICBwb3NpdGlvbjogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmtLvliqjlhbfkvZPlnLDngrknLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgbWF4U2lnbnVwczogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeacgOWkp+aKpeWQjeS6uuaVsCcsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgeyB0eXBlOiAnbnVtYmVyJywgbWluOiAxLCBtZXNzYWdlOiAn5oql5ZCN5Lq65pWw5b+F6aG75aSn5LqOMCcsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICB0aW1lUmFuZ2U6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5rS75Yqo5pe26Ze0JywgdHJpZ2dlcjogJ2NoYW5nZScgfV0sCiAgICAgICAgdGFyZ2V0VXNlcnM6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5rS75Yqo5a+56LGhJywgdHJpZ2dlcjogJ2NoYW5nZScgfV0sCiAgICAgICAgY292ZXJQaWN0dXJlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+S4iuS8oOa0u+WKqOWwgemdouWbvueJhycsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dCiAgICAgIH0sCiAgICAgIAogICAgICAvLyDljp/mnInnmoTnpL7lm6LmlbDmja7kv53mjIHkuI3lj5gKICAgICAgc3BvcnRzQ2x1YnM6IFsKICAgICAgICAn55Gc5Ly95Y2P5LyaJywgJ+ivkeiLkeaji+ekvicsICfnr67nkIPkv7HkuZDpg6gnLCAn5q2m5pyv5Y2P5LyaJywgCiAgICAgICAgJ+eUteWtkOernuaKgOWNj+S8micsICdTUlTmspnlsJjmmrTmu5Hova7ljY/kvJonLCAn57695q+b55CD5Y2P5LyaJywKICAgICAgICAn6auY5bCU5aSr5L+x5LmQ6YOoJywgJ+S5kuS5k+eQg+WNj+S8micsICfnvZHnkIPljY/kvJonCiAgICAgIF0sCiAgICAgIHNlcnZpY2VDbHViczogWwogICAgICAgICflm77kuabppoblrabnlJ/nrqHnkIblp5TlkZjkvJonLCAn5Zu95peX54+tJywgJ+eIseW/g+WNj+S8micsCiAgICAgICAgJ+W4jOWGgOeOr+S/neWNj+S8micsICfnuqLljYHlrZfkvJonCiAgICAgIF0sCiAgICAgIGFjYWRlbWljQ2x1YnM6IFsKICAgICAgICAn57qi5p2J56eR5oqA56S+JywgJ+iLseivreWPo+ivreWwluWFtemYnycsICfooYznn6XosIPnoJTnpL4nLCAn57uP6LS45Y2P5LyaJywKICAgICAgICAn5peF5ri45Y2P5LyaJywgJ+i+qeiuuuWNj+S8micsICfmlrDlpJbor63lrabnpL4nLCAn5Yib5Lia6IGU5ZCI5Y2P5LyaJywKICAgICAgICAn5aSn5a2m55Sf5b+D55CG5Y2P5LyaJywgJ+ilv+ePreeJmeWPo+ivreWwluWFtemYnycsICfpn6nor63lj6Por63lsJblhbXpmJ8nLAogICAgICAgICfml6Xor63lj6Por63lsJblhbXpmJ8nCiAgICAgIF0sCiAgICAgIGFydENsdWJzOiBbCiAgICAgICAgJ+WbveWtpueglOS5oOS8micsICdNaWdodHkgRm9yY2XooZfoiJ7noJTkuaDnpL4nLCAn6ZuP5Yek6K+X56S+JywKICAgICAgICAnRS1MRVZFTOS4u+aMgei+vuS6uumYnycsICfliqjmhJ/mvKvnoJTnpL4nLCAn5Lmm55S75Y2P5LyaJywKICAgICAgICAn5YaJ6aOe56CU5Lmg5Ymn56S+JywgJ+ahg+adjuaWh+WtpumAmuiur+ekvicsICfmkYTlvbHljY/kvJonLAogICAgICAgICfmtYHooYzpn7PkuZDmlofljJbnpL4nLCAn6a2U5pyv5Y2P5LyaJywgJ+iTneWkqeiJuuacr+ekvicKICAgICAgXQogICAgfQogIH0sCiAgCiAgY3JlYXRlZCgpIHsKICAgIC8vIOWcqOe7hOS7tuWIm+W7uuaXtuiuvue9ruWPkeW4g+iAhUlECiAgICBpZiAodGhpcy51c2VySW5mbykgewogICAgICB0aGlzLmFjdGl2aXR5Rm9ybS51c2VySWQgPSB0aGlzLnVzZXJJbmZvLmlkCiAgICB9CiAgICAvLyDojrflj5bmtLvliqjliJfooagKICAgIHRoaXMuZ2V0TGlzdCgpCiAgfSwKICAKICB3YXRjaDogewogICAgLy8g55uR5ZCs55So5oi35L+h5oGv5Y+Y5YyWCiAgICB1c2VySW5mbzogewogICAgICBoYW5kbGVyKG5ld1ZhbCkgewogICAgICAgIGlmIChuZXdWYWwpIHsKICAgICAgICAgIHRoaXMuYWN0aXZpdHlGb3JtLnVzZXJJZCA9IG5ld1ZhbC5pZAogICAgICAgIH0KICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9CiAgfSwKICAKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bmtLvliqjliJfooajmlbDmja4KICAgIGFzeW5jIGdldExpc3QoKSB7CiAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlCiAgICAgIHRyeSB7CiAgICAgICAgLy8g5aSE55CG5p+l6K+i5Y+C5pWwCiAgICAgICAgY29uc3QgcXVlcnkgPSB7CiAgICAgICAgICAuLi50aGlzLmxpc3RRdWVyeQogICAgICAgIH0KICAgICAgICAKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldEFjdGl2aXR5TGlzdFVzaW5nUG9zdChxdWVyeSkKICAgICAgICB0aGlzLmFjdGl2aXR5TGlzdCA9IHJlc3BvbnNlLmRhdGEucmVjb3JkcwogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5rS75Yqo5YiX6KGo5aSx6LSlOicsIGVycm9yKQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPlua0u+WKqOWIl+ihqOWksei0pScpCiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgIH0KICAgIH0sCgogICAgLy8g5aSE55CG5pCc57SiCiAgICBoYW5kbGVTZWFyY2goKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LmN1cnJlbnQgPSAxCiAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICB9LAogICAgCiAgICAvLyDlpITnkIbliJvlu7rmtLvliqgKICAgIGhhbmRsZUNyZWF0ZSgpIHsKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICflj5HluIPmtLvliqgnCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMuYWN0aXZpdHlGb3JtLnJlc2V0RmllbGRzKCkKICAgICAgICAvLyDph43nva7ooajljZXmlbDmja4KICAgICAgICB0aGlzLmFjdGl2aXR5Rm9ybSA9IHsKICAgICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgICB0aXRsZTogJycsCiAgICAgICAgICBwcm9maWxlOiAnJywKICAgICAgICAgIGNhdGVnb3J5OiAnJywKICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySW5mbyA/IHRoaXMudXNlckluZm8uaWQgOiAnJywKICAgICAgICAgIGNvdmVyUGljdHVyZTogJycsCiAgICAgICAgICBvcmdhbml6ZXJzOiAnJywKICAgICAgICAgIHBvc2l0aW9uOiAnJywKICAgICAgICAgIG1heFNpZ251cHM6IDEwMCwKICAgICAgICAgIHRhcmdldFVzZXJzOiAnJywKICAgICAgICAgIHRpbWVSYW5nZTogW10KICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgCiAgICAvLyDlpITnkIblm77niYfkuIrkvKDmiJDlip8KICAgIGhhbmRsZUltYWdlU3VjY2VzcyhyZXMsIGZpbGUpIHsKICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDAgJiYgcmVzLmRhdGEgJiYgcmVzLmRhdGEubGVuZ3RoID4gMCkgewogICAgICAgIC8vIOS9v+eUqOacjeWKoeWZqOi/lOWbnueahOWbvueJh1VSTAogICAgICAgIHRoaXMuYWN0aXZpdHlGb3JtLmNvdmVyUGljdHVyZSA9IHJlcy5kYXRhWzBdCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Zu+54mH5LiK5Lyg5aSx6LSlJykKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5Zu+54mH5LiK5Lyg5YmN55qE6aqM6K+BCiAgICBiZWZvcmVJbWFnZVVwbG9hZChmaWxlKSB7CiAgICAgIGNvbnN0IGlzSlBHID0gZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZycgfHwgZmlsZS50eXBlID09PSAnaW1hZ2UvcG5nJwogICAgICBjb25zdCBpc0x0Mk0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDIKCiAgICAgIGlmICghaXNKUEcpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlm77niYflj6rog73mmK8gSlBHL1BORyDmoLzlvI8hJykKICAgICAgfQogICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOWbvueJh+Wkp+Wwj+S4jeiDvei2hei/hyAyTUIhJykKICAgICAgfQogICAgICByZXR1cm4gaXNKUEcgJiYgaXNMdDJNCiAgICB9LAogICAgCiAgICAvLyDlpITnkIbooajljZXmj5DkuqQKICAgIGhhbmRsZVN1Ym1pdCgpIHsKICAgICAgdGhpcy4kcmVmcy5hY3Rpdml0eUZvcm0udmFsaWRhdGUoYXN5bmMgKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICAvLyDmoLzlvI/ljJbml6XmnJ8KICAgICAgICAgICAgY29uc3QgZm9ybWF0RGF0ZSA9IChkYXRlKSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgcGFkID0gKG51bSkgPT4gKG51bSA8IDEwID8gYDAke251bX1gIDogbnVtKQogICAgICAgICAgICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCkKICAgICAgICAgICAgICBjb25zdCBtb250aCA9IHBhZChkYXRlLmdldE1vbnRoKCkgKyAxKQogICAgICAgICAgICAgIGNvbnN0IGRheSA9IHBhZChkYXRlLmdldERhdGUoKSkKICAgICAgICAgICAgICBjb25zdCBob3VycyA9IHBhZChkYXRlLmdldEhvdXJzKCkpCiAgICAgICAgICAgICAgY29uc3QgbWludXRlcyA9IHBhZChkYXRlLmdldE1pbnV0ZXMoKSkKICAgICAgICAgICAgICBjb25zdCBzZWNvbmRzID0gcGFkKGRhdGUuZ2V0U2Vjb25kcygpKQogICAgICAgICAgICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX0gJHtob3Vyc306JHttaW51dGVzfToke3NlY29uZHN9YAogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zdCBzdWJtaXREYXRhID0gewogICAgICAgICAgICAgIGlkOiB0aGlzLmFjdGl2aXR5Rm9ybS5pZCwKICAgICAgICAgICAgICAuLi50aGlzLmFjdGl2aXR5Rm9ybSwKICAgICAgICAgICAgICBzdGFydFRpbWU6IGZvcm1hdERhdGUobmV3IERhdGUodGhpcy5hY3Rpdml0eUZvcm0udGltZVJhbmdlWzBdKSksCiAgICAgICAgICAgICAgZW5kVGltZTogZm9ybWF0RGF0ZShuZXcgRGF0ZSh0aGlzLmFjdGl2aXR5Rm9ybS50aW1lUmFuZ2VbMV0pKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGRlbGV0ZSBzdWJtaXREYXRhLnRpbWVSYW5nZQogICAgICAgICAgICAKICAgICAgICAgICAgLy8g5qC55o2u5piv5ZCm5pyJaWTliKTmlq3mmK/mlrDlop7ov5jmmK/nvJbovpEKICAgICAgICAgICAgaWYgKHN1Ym1pdERhdGEuaWQpIHsKICAgICAgICAgICAgICBhd2FpdCB1cGRhdGVBY3Rpdml0eVVzaW5nUG9zdChzdWJtaXREYXRhKQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5rS75Yqo5pu05paw5oiQ5YqfJykKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBkZWxldGUgc3VibWl0RGF0YS5pZAogICAgICAgICAgICAgIGF3YWl0IHB1Ymxpc2hBY3Rpdml0eVVzaW5nUG9zdChzdWJtaXREYXRhKQogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5rS75Yqo5Y+R5biD5oiQ5YqfJykKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgICAgICAvLyDliLfmlrDmtLvliqjliJfooagKICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCkKICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMuYWN0aXZpdHlGb3JtLmlkID8gJ+abtOaWsCcgOiAn5Y+R5biDJwogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGDmtLvliqgke2FjdGlvbn3lpLHotKVgKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgogICAgLy8g5aSE55CG5q+P6aG15p2h5pWw5Y+Y5YyWCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlU2l6ZSA9IHZhbAogICAgICB0aGlzLmdldExpc3QoKQogICAgfSwKCiAgICAvLyDlpITnkIbpobXnoIHlj5jljJYKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LmN1cnJlbnQgPSB2YWwKICAgICAgdGhpcy5nZXRMaXN0KCkKICAgIH0sCgogICAgLy8g5aSE55CG57yW6L6R5rS75YqoCiAgICBoYW5kbGVFZGl0KHJvdykgewogICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gJ+e8lui+kea0u+WKqCcKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgLy8g5bCG5pe26Ze05a2X56ym5Liy6L2s5o2i5Li65pel5pyf5a+56LGh5pWw57uECiAgICAgICAgY29uc3QgdGltZVJhbmdlID0gW25ldyBEYXRlKHJvdy5zdGFydFRpbWUpLCBuZXcgRGF0ZShyb3cuZW5kVGltZSldCgogICAgICAgIC8vIOWkjeWItua0u+WKqOaVsOaNruW5tua3u+WKoOaXtumXtOiMg+WbtAogICAgICAgIHRoaXMuYWN0aXZpdHlGb3JtID0gewogICAgICAgICAgLi4ucm93LAogICAgICAgICAgdGltZVJhbmdlCiAgICAgICAgfQogICAgICAgIGNvbnNvbGUubG9nKCfnvJbovpHooajljZXmlbDmja46JywgdGhpcy5hY3Rpdml0eUZvcm0pCiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOWkhOeQhuWIoOmZpOa0u+WKqAogICAgaGFuZGxlRGVsZXRlKHJvdykgewogICAgICB0aGlzLiRjb25maXJtKCfnoa7orqTliKDpmaTor6XmtLvliqg/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICBhd2FpdCByZW1vdmVBY3Rpdml0eVVzaW5nUG9zdCh7IGlkOiByb3cuaWQgfSkKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwogICAgICAgICAgfSkKICAgICAgICAgIC8vIOWIt+aWsOa0u+WKqOWIl+ihqAogICAgICAgICAgdGhpcy5nZXRMaXN0KCkKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Yig6Zmk5aSx6LSlJykKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAvLyDlj5bmtojliKDpmaTml7bnmoTlpITnkIYKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkRA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/activity","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-row :gutter=\"24\">\n      <!-- 左侧社团分类列表 -->\n      <el-col :span=\"4\">\n        <el-card class=\"box-card\" style=\"height: calc(100vh - 120px);\">\n          <div slot=\"header\" class=\"clearfix\">\n            <span>社团分类</span>\n          </div>\n          <el-menu default-active=\"1\" class=\"club-menu\">\n            <!-- 体育类社团 -->\n            <el-submenu index=\"1\">\n              <template slot=\"title\">\n                <i class=\"el-icon-basketball\"></i>\n                <span>体育类社团</span>\n              </template>\n              <el-menu-item v-for=\"(club, index) in sportsClubs\" \n                :key=\"'sports' + index\" \n                :index=\"'1-' + index\"\n              >\n                {{ club }}\n              </el-menu-item>\n            </el-submenu>\n\n            <!-- 服务类社团 -->\n            <el-submenu index=\"2\">\n              <template slot=\"title\">\n                <i class=\"el-icon-service\"></i>\n                <span>服务类社团</span>\n              </template>\n              <el-menu-item v-for=\"(club, index) in serviceClubs\" \n                :key=\"'service' + index\" \n                :index=\"'2-' + index\"\n              >\n                {{ club }}\n              </el-menu-item>\n            </el-submenu>\n\n            <!-- 学术类社团 -->\n            <el-submenu index=\"3\">\n              <template slot=\"title\">\n                <i class=\"el-icon-reading\"></i>\n                <span>学术类社团</span>\n              </template>\n              <el-menu-item v-for=\"(club, index) in academicClubs\" \n                :key=\"'academic' + index\" \n                :index=\"'3-' + index\"\n              >\n                {{ club }}\n              </el-menu-item>\n            </el-submenu>\n\n            <!-- 艺术类社团 -->\n            <el-submenu index=\"4\">\n              <template slot=\"title\">\n                <i class=\"el-icon-picture\"></i>\n                <span>艺术类社团</span>\n              </template>\n              <el-menu-item v-for=\"(club, index) in artClubs\" \n                :key=\"'art' + index\" \n                :index=\"'4-' + index\"\n              >\n                {{ club }}\n              </el-menu-item>\n            </el-submenu>\n          </el-menu>\n        </el-card>\n      </el-col>\n\n      <!-- 右侧内容区 -->\n      <el-col :span=\"20\">\n        <el-card class=\"box-card\">\n          <!-- 顶部搜索和操作区 -->\n          <div class=\"filter-container\">\n            <el-input\n              v-model=\"listQuery.title\"\n              placeholder=\"活动标题\"\n              style=\"width: 200px;\"\n              class=\"filter-item\"\n            />\n            <el-input\n              v-model=\"listQuery.profile\"\n              placeholder=\"活动简介\"\n              style=\"width: 200px;\"\n              class=\"filter-item\"\n            />\n            <el-select v-model=\"listQuery.category\" placeholder=\"活动类别\" class=\"filter-item\" style=\"width: 150px;\">\n              <el-option label=\"全部\" value=\"\" />\n              <el-option v-for=\"type in activityTypes\" :key=\"type\" :label=\"type\" :value=\"type\" />\n            </el-select>\n            <el-input\n              v-model=\"listQuery.organizer\"\n              placeholder=\"组织名称\"\n              style=\"width: 200px;\"\n              class=\"filter-item\"\n            />\n            <el-input\n              v-model=\"listQuery.targetUsers\"\n              placeholder=\"活动对象\"\n              style=\"width: 150px;\"\n              class=\"filter-item\"\n            />\n            <el-button class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handleSearch\">\n              搜索\n            </el-button>\n            <el-button class=\"filter-item\" type=\"success\" icon=\"el-icon-plus\" @click=\"handleCreate\">\n              发布活动\n            </el-button>\n          </div>\n\n          <!-- 活动列表 -->\n          <el-table \n            v-loading=\"listLoading\"\n            :data=\"activityList\" \n            style=\"width: 100%; margin-top: 20px; height: calc(100vh - 290px)\"\n            :height=\"'calc(100vh - 290px)'\"\n            element-loading-text=\"加载中...\"\n            border\n            stripe\n            highlight-current-row\n          >\n            <el-table-column label=\"活动封面\" width=\"120\" fixed>\n              <template slot-scope=\"{row}\">\n                <el-image\n                  style=\"width: 80px; height: 80px\"\n                  :src=\"row.coverPicture\"\n                  fit=\"cover\"\n                  :preview-src-list=\"[row.coverPicture]\"\n                >\n                  <div slot=\"error\" class=\"image-slot\">\n                    <i class=\"el-icon-picture-outline\"></i>\n                  </div>\n                </el-image>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"title\" label=\"活动标题\" min-width=\"150\" fixed />\n            <el-table-column prop=\"profile\" label=\"活动简介\" min-width=\"200\">\n              <template slot-scope=\"{row}\">\n                <el-tooltip \n                  class=\"item\" \n                  effect=\"dark\" \n                  :content=\"row.profile || '暂无简介'\" \n                  placement=\"top-start\"\n                >\n                  <span>{{ row.profile | ellipsis }}</span>\n                </el-tooltip>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"category\" label=\"活动类别\" width=\"100\" />\n            <el-table-column prop=\"organizers\" label=\"主办单位\" width=\"150\" />\n            <el-table-column prop=\"position\" label=\"活动地点\" width=\"150\" />\n            <el-table-column label=\"报名情况\" width=\"120\" align=\"center\">\n              <template slot-scope=\"{row}\">\n                {{ row.currentSignups }}/{{ row.maxSignups }}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"targetUsers\" label=\"活动对象\" width=\"120\" />\n            <el-table-column prop=\"userId\" label=\"创建人ID\" width=\"100\" align=\"center\" />\n            <el-table-column prop=\"hits\" label=\"点击量\" width=\"80\" align=\"center\" />\n            <el-table-column prop=\"status\" label=\"状态\" width=\"100\" align=\"center\">\n              <template slot-scope=\"{row}\">\n                <el-tag :type=\"row.status === 1 ? 'success' : 'info'\">\n                  {{ row.status === 1 ? '进行中' : '已结束' }}\n                </el-tag>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"startTime\" label=\"开始时间\" width=\"160\" align=\"center\" />\n            <el-table-column prop=\"endTime\" label=\"结束时间\" width=\"160\" align=\"center\" />\n            <el-table-column label=\"操作\" width=\"150\" fixed=\"right\" align=\"center\">\n              <template slot-scope=\"{row}\">\n                <el-button type=\"text\" @click=\"handleEdit(row)\">编辑</el-button>\n                <el-button type=\"text\" @click=\"handleDelete(row)\">删除</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n\n          <!-- 分页 -->\n          <div class=\"pagination-container\">\n            <el-pagination\n              background\n              @size-change=\"handleSizeChange\"\n              @current-change=\"handleCurrentChange\"\n              :current-page=\"listQuery.current\"\n              :page-sizes=\"[10, 20, 30, 50]\"\n              :page-size=\"listQuery.pageSize\"\n              layout=\"total, sizes, prev, pager, next, jumper\"\n              :total=\"total\">\n            </el-pagination>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n\n    <!-- 活动发布/编辑对话框 -->\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogVisible\" width=\"50%\" >\n      <el-form ref=\"activityForm\" :model=\"activityForm\" :rules=\"rules\" label-width=\"100px\">\n        <el-form-item label=\"活动标题\" prop=\"title\">\n          <el-input v-model=\"activityForm.title\" placeholder=\"请输入活动标题\" style=\"width: 90%\" />\n        </el-form-item>\n        <el-form-item label=\"活动简介\" prop=\"description\">\n          <el-input \n            type=\"textarea\" \n            v-model=\"activityForm.profile\" \n            rows=\"4\" \n            placeholder=\"请输入活动简介(选填)\"\n            style=\"width: 90%\" \n          />\n        </el-form-item>\n        <el-form-item label=\"活动类别\" prop=\"category\" required>\n          <el-select v-model=\"activityForm.category\" placeholder=\"请选择活动类别\" style=\"width: 90%\">\n            <el-option v-for=\"type in activityTypes\" :key=\"type\" :label=\"type\" :value=\"type\" />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"发布人ID\" prop=\"publisherId\">\n          <el-input v-model=\"activityForm.userId\" disabled style=\"width: 90%\" />\n        </el-form-item>\n        <el-form-item label=\"封面图片\" prop=\"coverPicture\" required>\n          <el-upload\n            class=\"avatar-uploader\"\n            action=\"/api/upload/fileList\"\n            :show-file-list=\"false\"\n            :on-success=\"handleImageSuccess\"\n            :before-upload=\"beforeImageUpload\">\n            <img v-if=\"activityForm.coverPicture\" :src=\"activityForm.coverPicture\" class=\"avatar\">\n            <div v-else class=\"avatar-uploader-icon\">\n              <i class=\"el-icon-plus\"></i>\n              <div class=\"upload-text\">点击上传封面图片</div>\n            </div>\n          </el-upload>\n        </el-form-item>\n        <el-form-item label=\"主办单位\" prop=\"organizers\" required>\n          <el-input v-model=\"activityForm.organizers\" placeholder=\"请输入主办单位名称\" style=\"width: 90%\" />\n        </el-form-item>\n        <el-form-item label=\"活动地点\" prop=\"position\" required>\n          <el-input v-model=\"activityForm.position\" placeholder=\"请输入活动具体地点\" style=\"width: 90%\" />\n        </el-form-item>\n        <el-form-item label=\"最大报名人数\" label-width=\"120px\" prop=\"maxSignups\" required>\n          <el-input-number \n            v-model=\"activityForm.maxSignups\"\n            :min=\"1\" \n            :max=\"1000\"\n            placeholder=\"请输入最大报名人数\"\n            style=\"width: 220px\"\n          />\n        </el-form-item>\n        <el-form-item label=\"活动对象\" prop=\"targetUsers\" required>\n          <el-select v-model=\"activityForm.targetUsers\" placeholder=\"请选择活动对象\" style=\"width: 90%\">\n            <el-option v-for=\"target in targetAudienceOptions\" \n              :key=\"target\" \n              :value=\"target\">\n              {{ target }}\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"活动时间\" prop=\"timeRange\">\n          <el-date-picker\n            v-model=\"activityForm.timeRange\"\n            type=\"datetimerange\"\n            range-separator=\"至\"\n            start-placeholder=\"开始时间\"\n            end-placeholder=\"结束时间\"\n            style=\"width: 90%\"\n          />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"handleSubmit\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { publishActivityUsingPost, getActivityListUsingPost, updateActivityUsingPost, removeActivityUsingPost } from '@/api/activityController'\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'Activity',\n  filters: {\n    // 文本超过20个字符显示省略号\n    ellipsis(value) {\n      if (!value) return ''\n      if (value.length > 20) {\n        return value.slice(0, 20) + '...'\n      }\n      return value\n    }\n  },\n  computed: {\n    ...mapState({\n      userInfo: state => state.user.userInfo\n    })\n  },\n  data() {\n    return {\n      dialogVisible: false,\n      dialogTitle: '发布活动',\n      activityList: [], // 活动列表数据\n      total: 0,\n      listLoading: true,\n      listQuery: {\n        current: 1,\n        pageSize: 10,\n        title: undefined,\n        type: undefined,\n        profile: undefined,\n        organizer: undefined,\n        targetUsers: undefined,\n        startTime: undefined,\n        endTime: undefined\n      },\n      \n      // 活动类别选项\n      activityTypes: ['体育类', '学术类', '艺术类', '服务类'],\n      \n      // 活动对象选项\n      targetAudienceOptions: ['全体师生', '本科生', '研究生', '教职工'],\n      \n      // 表单数据\n      activityForm: {\n        id: undefined,\n        title: '',\n        profile: '',\n        category: '',\n        userId: '',\n        coverPicture: '',\n        organizers: '',\n        position: '',\n        maxSignups: 100,\n        targetUsers: '',\n        timeRange: []\n      },\n      \n      // 表单验证规则\n      rules: {\n        title: [{ required: true, message: '请输入活动标题', trigger: 'blur' }],\n        category: [{ required: true, message: '请选择活动类别', trigger: 'change' }],\n        organizers: [{ required: true, message: '请输入主办单位名称', trigger: 'blur' }],\n        position: [{ required: true, message: '请输入活动具体地点', trigger: 'blur' }],\n        maxSignups: [\n          { required: true, message: '请输入最大报名人数', trigger: 'blur' },\n          { type: 'number', min: 1, message: '报名人数必须大于0', trigger: 'blur' }\n        ],\n        timeRange: [{ required: true, message: '请选择活动时间', trigger: 'change' }],\n        targetUsers: [{ required: true, message: '请选择活动对象', trigger: 'change' }],\n        coverPicture: [{ required: true, message: '请上传活动封面图片', trigger: 'change' }]\n      },\n      \n      // 原有的社团数据保持不变\n      sportsClubs: [\n        '瑜伽协会', '译苑棋社', '篮球俱乐部', '武术协会', \n        '电子竞技协会', 'SRT沙尘暴滑轮协会', '羽毛球协会',\n        '高尔夫俱乐部', '乒乓球协会', '网球协会'\n      ],\n      serviceClubs: [\n        '图书馆学生管理委员会', '国旗班', '爱心协会',\n        '希冀环保协会', '红十字会'\n      ],\n      academicClubs: [\n        '红杉科技社', '英语口语尖兵队', '行知调研社', '经贸协会',\n        '旅游协会', '辩论协会', '新外语学社', '创业联合协会',\n        '大学生心理协会', '西班牙口语尖兵队', '韩语口语尖兵队',\n        '日语口语尖兵队'\n      ],\n      artClubs: [\n        '国学研习会', 'Mighty Force街舞研习社', '雏凤诗社',\n        'E-LEVEL主持达人队', '动感漫研社', '书画协会',\n        '冉飞研习剧社', '桃李文学通讯社', '摄影协会',\n        '流行音乐文化社', '魔术协会', '蓝天艺术社'\n      ]\n    }\n  },\n  \n  created() {\n    // 在组件创建时设置发布者ID\n    if (this.userInfo) {\n      this.activityForm.userId = this.userInfo.id\n    }\n    // 获取活动列表\n    this.getList()\n  },\n  \n  watch: {\n    // 监听用户信息变化\n    userInfo: {\n      handler(newVal) {\n        if (newVal) {\n          this.activityForm.userId = newVal.id\n        }\n      },\n      immediate: true\n    }\n  },\n  \n  methods: {\n    // 获取活动列表数据\n    async getList() {\n      this.listLoading = true\n      try {\n        // 处理查询参数\n        const query = {\n          ...this.listQuery\n        }\n        \n        const response = await getActivityListUsingPost(query)\n        this.activityList = response.data.records\n        this.total = response.data.total\n      } catch (error) {\n        console.error('获取活动列表失败:', error)\n        this.$message.error('获取活动列表失败')\n      } finally {\n        this.listLoading = false\n      }\n    },\n\n    // 处理搜索\n    handleSearch() {\n      this.listQuery.current = 1\n      this.getList()\n    },\n    \n    // 处理创建活动\n    handleCreate() {\n      this.dialogTitle = '发布活动'\n      this.dialogVisible = true\n      this.$nextTick(() => {\n        this.$refs.activityForm.resetFields()\n        // 重置表单数据\n        this.activityForm = {\n          id: undefined,\n          title: '',\n          profile: '',\n          category: '',\n          userId: this.userInfo ? this.userInfo.id : '',\n          coverPicture: '',\n          organizers: '',\n          position: '',\n          maxSignups: 100,\n          targetUsers: '',\n          timeRange: []\n        }\n      })\n    },\n    \n    // 处理图片上传成功\n    handleImageSuccess(res, file) {\n      if (res.code === 200 && res.data && res.data.length > 0) {\n        // 使用服务器返回的图片URL\n        this.activityForm.coverPicture = res.data[0]\n      } else {\n        this.$message.error('图片上传失败')\n      }\n    },\n    \n    // 图片上传前的验证\n    beforeImageUpload(file) {\n      const isJPG = file.type === 'image/jpeg' || file.type === 'image/png'\n      const isLt2M = file.size / 1024 / 1024 < 2\n\n      if (!isJPG) {\n        this.$message.error('上传图片只能是 JPG/PNG 格式!')\n      }\n      if (!isLt2M) {\n        this.$message.error('上传图片大小不能超过 2MB!')\n      }\n      return isJPG && isLt2M\n    },\n    \n    // 处理表单提交\n    handleSubmit() {\n      this.$refs.activityForm.validate(async (valid) => {\n        if (valid) {\n          try {\n            // 格式化日期\n            const formatDate = (date) => {\n              const pad = (num) => (num < 10 ? `0${num}` : num)\n              const year = date.getFullYear()\n              const month = pad(date.getMonth() + 1)\n              const day = pad(date.getDate())\n              const hours = pad(date.getHours())\n              const minutes = pad(date.getMinutes())\n              const seconds = pad(date.getSeconds())\n              return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`\n            }\n\n            const submitData = {\n              id: this.activityForm.id,\n              ...this.activityForm,\n              startTime: formatDate(new Date(this.activityForm.timeRange[0])),\n              endTime: formatDate(new Date(this.activityForm.timeRange[1]))\n            }\n            delete submitData.timeRange\n            \n            // 根据是否有id判断是新增还是编辑\n            if (submitData.id) {\n              await updateActivityUsingPost(submitData)\n              this.$message.success('活动更新成功')\n            } else {\n              delete submitData.id\n              await publishActivityUsingPost(submitData)\n              this.$message.success('活动发布成功')\n            }\n            this.dialogVisible = false\n            // 刷新活动列表\n            this.getList()\n          } catch (error) {\n            const action = this.activityForm.id ? '更新' : '发布'\n            this.$message.error(`活动${action}失败`)\n          }\n        }\n      })\n    },\n\n    // 处理每页条数变化\n    handleSizeChange(val) {\n      this.listQuery.pageSize = val\n      this.getList()\n    },\n\n    // 处理页码变化\n    handleCurrentChange(val) {\n      this.listQuery.current = val\n      this.getList()\n    },\n\n    // 处理编辑活动\n    handleEdit(row) {\n      this.dialogTitle = '编辑活动'\n      this.dialogVisible = true\n      this.$nextTick(() => {\n        // 将时间字符串转换为日期对象数组\n        const timeRange = [new Date(row.startTime), new Date(row.endTime)]\n\n        // 复制活动数据并添加时间范围\n        this.activityForm = {\n          ...row,\n          timeRange\n        }\n        console.log('编辑表单数据:', this.activityForm)\n      })\n    },\n\n    // 处理删除活动\n    handleDelete(row) {\n      this.$confirm('确认删除该活动?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        try {\n          await removeActivityUsingPost({ id: row.id })\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          })\n          // 刷新活动列表\n          this.getList()\n        } catch (error) {\n          this.$message.error('删除失败')\n        }\n      }).catch(() => {\n        // 取消删除时的处理\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        })\n      })\n    }\n  }\n}\n</script> \n\n<style scoped>\n.filter-container {\n  padding-bottom: 10px;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n/deep/ .el-table__fixed-right{\n  z-index: 1 !important;\n}\n/deep/ .el-table__fixed::before{\n  z-index: 1 !important;\n}\n\n.club-menu {\n  border-right: none;\n  height: calc(100vh - 200px);\n  overflow-y: auto;\n}\n\n.el-dialog__body {\n  padding: 20px 40px;\n}\n\n.upload-text {\n  font-size: 12px;\n  color: #606266;\n  margin-top: 10px;\n}\n\n.el-checkbox-group {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 10px;\n}\n\n.avatar-uploader {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  width: 178px;\n}\n\n.avatar-uploader:hover {\n  border-color: #409EFF;\n}\n\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n\n.pagination-container {\n  padding: 32px 16px;\n  text-align: right;\n}\n</style> "]}]}