{"remainingRequest":"G:\\Code\\campus\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\Code\\campus\\vue-admin-template\\src\\views\\activity\\index.vue?vue&type=style&index=0&id=99941528&scoped=true&lang=css","dependencies":[{"path":"G:\\Code\\campus\\vue-admin-template\\src\\views\\activity\\index.vue","mtime":1742560186830},{"path":"G:\\Code\\campus\\vue-admin-template\\node_modules\\css-loader\\dist\\cjs.js","mtime":1742551615470},{"path":"G:\\Code\\campus\\vue-admin-template\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1742551617337},{"path":"G:\\Code\\campus\\vue-admin-template\\node_modules\\postcss-loader\\src\\index.js","mtime":1742551616254},{"path":"G:\\Code\\campus\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742551614966},{"path":"G:\\Code\\campus\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1742551616768}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouZmlsdGVyLWNvbnRhaW5lciB7DQogIHBhZGRpbmctYm90dG9tOiAxMHB4Ow0KICBkaXNwbGF5OiBmbGV4Ow0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KICBnYXA6IDEwcHg7DQp9DQoNCi5jbHViLW1lbnUgew0KICBib3JkZXItcmlnaHQ6IG5vbmU7DQogIGhlaWdodDogY2FsYygxMDB2aCAtIDIwMHB4KTsNCiAgb3ZlcmZsb3cteTogYXV0bzsNCn0NCg0KLmVsLWRpYWxvZ19fYm9keSB7DQogIHBhZGRpbmc6IDIwcHggNDBweDsNCn0NCg0KLnVwbG9hZC10ZXh0IHsNCiAgZm9udC1zaXplOiAxMnB4Ow0KICBjb2xvcjogIzYwNjI2NjsNCiAgbWFyZ2luLXRvcDogMTBweDsNCn0NCg0KLmVsLWNoZWNrYm94LWdyb3VwIHsNCiAgZGlzcGxheTogZ3JpZDsNCiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoMiwgMWZyKTsNCiAgZ2FwOiAxMHB4Ow0KfQ0KDQouYXZhdGFyLXVwbG9hZGVyIHsNCiAgYm9yZGVyOiAxcHggZGFzaGVkICNkOWQ5ZDk7DQogIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgY3Vyc29yOiBwb2ludGVyOw0KICBwb3NpdGlvbjogcmVsYXRpdmU7DQogIG92ZXJmbG93OiBoaWRkZW47DQogIHdpZHRoOiAxNzhweDsNCn0NCg0KLmF2YXRhci11cGxvYWRlcjpob3ZlciB7DQogIGJvcmRlci1jb2xvcjogIzQwOUVGRjsNCn0NCg0KLmF2YXRhci11cGxvYWRlci1pY29uIHsNCiAgZm9udC1zaXplOiAyOHB4Ow0KICBjb2xvcjogIzhjOTM5ZDsNCiAgd2lkdGg6IDE3OHB4Ow0KICBoZWlnaHQ6IDE3OHB4Ow0KICBsaW5lLWhlaWdodDogMTc4cHg7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCg0KLmF2YXRhciB7DQogIHdpZHRoOiAxNzhweDsNCiAgaGVpZ2h0OiAxNzhweDsNCiAgZGlzcGxheTogYmxvY2s7DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgWA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/activity","sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-row :gutter=\"24\">\r\n      <!-- 左侧社团分类列表 -->\r\n      <el-col :span=\"4\">\r\n        <el-card class=\"box-card\" style=\"height: calc(100vh - 120px);\">\r\n          <div slot=\"header\" class=\"clearfix\">\r\n            <span>社团分类</span>\r\n          </div>\r\n          <el-menu default-active=\"1\" class=\"club-menu\">\r\n            <!-- 体育类社团 -->\r\n            <el-submenu index=\"1\">\r\n              <template slot=\"title\">\r\n                <i class=\"el-icon-basketball\"></i>\r\n                <span>体育类社团</span>\r\n              </template>\r\n              <el-menu-item v-for=\"(club, index) in sportsClubs\" \r\n                :key=\"'sports' + index\" \r\n                :index=\"'1-' + index\"\r\n              >\r\n                {{ club }}\r\n              </el-menu-item>\r\n            </el-submenu>\r\n\r\n            <!-- 服务类社团 -->\r\n            <el-submenu index=\"2\">\r\n              <template slot=\"title\">\r\n                <i class=\"el-icon-service\"></i>\r\n                <span>服务类社团</span>\r\n              </template>\r\n              <el-menu-item v-for=\"(club, index) in serviceClubs\" \r\n                :key=\"'service' + index\" \r\n                :index=\"'2-' + index\"\r\n              >\r\n                {{ club }}\r\n              </el-menu-item>\r\n            </el-submenu>\r\n\r\n            <!-- 学术类社团 -->\r\n            <el-submenu index=\"3\">\r\n              <template slot=\"title\">\r\n                <i class=\"el-icon-reading\"></i>\r\n                <span>学术类社团</span>\r\n              </template>\r\n              <el-menu-item v-for=\"(club, index) in academicClubs\" \r\n                :key=\"'academic' + index\" \r\n                :index=\"'3-' + index\"\r\n              >\r\n                {{ club }}\r\n              </el-menu-item>\r\n            </el-submenu>\r\n\r\n            <!-- 艺术类社团 -->\r\n            <el-submenu index=\"4\">\r\n              <template slot=\"title\">\r\n                <i class=\"el-icon-picture\"></i>\r\n                <span>艺术类社团</span>\r\n              </template>\r\n              <el-menu-item v-for=\"(club, index) in artClubs\" \r\n                :key=\"'art' + index\" \r\n                :index=\"'4-' + index\"\r\n              >\r\n                {{ club }}\r\n              </el-menu-item>\r\n            </el-submenu>\r\n          </el-menu>\r\n        </el-card>\r\n      </el-col>\r\n\r\n      <!-- 右侧内容区 -->\r\n      <el-col :span=\"20\">\r\n        <el-card class=\"box-card\">\r\n          <!-- 顶部搜索和操作区 -->\r\n          <div class=\"filter-container\">\r\n            <el-input\r\n              v-model=\"searchInput\"\r\n              placeholder=\"活动名称\"\r\n              style=\"width: 200px;\"\r\n              class=\"filter-item\"\r\n            />\r\n            <el-select v-model=\"activityType\" placeholder=\"活动类别\" class=\"filter-item\" style=\"width: 150px;\">\r\n              <el-option label=\"全部\" value=\"\" />\r\n              <el-option v-for=\"type in activityTypes\" :key=\"type\" :label=\"type\" :value=\"type\" />\r\n            </el-select>\r\n            <el-date-picker\r\n              v-model=\"dateRange\"\r\n              type=\"daterange\"\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n              class=\"filter-item\"\r\n            />\r\n            <el-button class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handleSearch\">\r\n              搜索\r\n            </el-button>\r\n            <el-button class=\"filter-item\" type=\"success\" icon=\"el-icon-plus\" @click=\"handleCreate\">\r\n              发布活动\r\n            </el-button>\r\n          </div>\r\n\r\n          <!-- 活动列表 -->\r\n          <el-table :data=\"activityList\" style=\"width: 100%; margin-top: 20px;\">\r\n            <el-table-column prop=\"title\" label=\"活动标题\" />\r\n            <el-table-column prop=\"type\" label=\"活动类别\" width=\"120\" />\r\n            <el-table-column prop=\"organizer\" label=\"主办单位\" width=\"150\" />\r\n            <el-table-column prop=\"startTime\" label=\"开始时间\" width=\"160\" />\r\n            <el-table-column prop=\"endTime\" label=\"结束时间\" width=\"160\" />\r\n            <el-table-column prop=\"status\" label=\"状态\" width=\"100\" />\r\n            <el-table-column label=\"操作\" width=\"150\" fixed=\"right\">\r\n              <template slot-scope=\"{row}\">\r\n                <el-button type=\"text\" @click=\"handleEdit(row)\">编辑</el-button>\r\n                <el-button type=\"text\" @click=\"handleDelete(row)\">删除</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- 活动发布/编辑对话框 -->\r\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogVisible\" width=\"50%\">\r\n      <el-form ref=\"activityForm\" :model=\"activityForm\" :rules=\"rules\" label-width=\"100px\">\r\n        <el-form-item label=\"活动标题\" prop=\"title\">\r\n          <el-input v-model=\"activityForm.title\" placeholder=\"请输入活动标题\" style=\"width: 90%\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"活动简介\" prop=\"description\">\r\n          <el-input \r\n            type=\"textarea\" \r\n            v-model=\"activityForm.description\" \r\n            rows=\"4\" \r\n            placeholder=\"请输入活动简介(选填)\"\r\n            style=\"width: 90%\" \r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"活动类别\" prop=\"type\">\r\n          <el-select v-model=\"activityForm.type\" placeholder=\"请选择活动类别\" style=\"width: 90%\">\r\n            <el-option v-for=\"type in activityTypes\" :key=\"type\" :label=\"type\" :value=\"type\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"发布人ID\" prop=\"publisherId\">\r\n          <el-input v-model=\"activityForm.publisherId\" disabled style=\"width: 90%\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"封面图片\" prop=\"coverImage\">\r\n          <el-upload\r\n            class=\"avatar-uploader\"\r\n            action=\"/api/upload\"\r\n            :show-file-list=\"false\"\r\n            :on-success=\"handleImageSuccess\"\r\n            :before-upload=\"beforeImageUpload\">\r\n            <img v-if=\"activityForm.coverImage\" :src=\"activityForm.coverImage\" class=\"avatar\">\r\n            <div v-else class=\"avatar-uploader-icon\">\r\n              <i class=\"el-icon-plus\"></i>\r\n              <div class=\"upload-text\">点击上传封面图片</div>\r\n            </div>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label=\"主办单位\" prop=\"organizer\">\r\n          <el-input v-model=\"activityForm.organizer\" placeholder=\"请输入主办单位名称\" style=\"width: 90%\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"活动地点\" prop=\"location\">\r\n          <el-input v-model=\"activityForm.location\" placeholder=\"请输入活动具体地点\" style=\"width: 90%\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"最大报名人数\" label-width=\"122px\" prop=\"maxParticipants\">\r\n          <el-input-number \r\n            v-model=\"activityForm.maxParticipants\"\r\n            :min=\"1\" \r\n            :max=\"1000\"\r\n            placeholder=\"请输入最大报名人数\"\r\n            style=\"width: 220px\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"活动对象\" prop=\"targetAudience\">\r\n          <el-checkbox-group v-model=\"activityForm.targetAudience\" style=\"width: 90%\">\r\n            <el-checkbox v-for=\"target in targetAudienceOptions\" \r\n              :key=\"target\" \r\n              :label=\"target\">\r\n              {{ target }}\r\n            </el-checkbox>\r\n          </el-checkbox-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"活动时间\" prop=\"timeRange\">\r\n          <el-date-picker\r\n            v-model=\"activityForm.timeRange\"\r\n            type=\"datetimerange\"\r\n            range-separator=\"至\"\r\n            start-placeholder=\"开始时间\"\r\n            end-placeholder=\"结束时间\"\r\n            value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n            style=\"width: 90%\"\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleSubmit\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { publishActivityUsingPost } from '@/api/activityController'\r\n\r\nexport default {\r\n  name: 'Activity',\r\n  data() {\r\n    return {\r\n      searchInput: '',\r\n      activityType: '',\r\n      dateRange: [],\r\n      dialogVisible: false,\r\n      dialogTitle: '发布活动',\r\n      activityList: [], // 活动列表数据\r\n      \r\n      // 活动类别选项\r\n      activityTypes: [\r\n        '文艺类',\r\n        '体育活动类',\r\n        '学术思辨类',\r\n        '社会实践与公益类',\r\n        '其他类'\r\n      ],\r\n      \r\n      // 活动对象选项\r\n      targetAudienceOptions: [\r\n        '全体师生',\r\n        '大一在校生[本]',\r\n        '大一在校生[专]',\r\n        '全体大一在校生',\r\n        '大二在校生[本]',\r\n        '大二在校生[专]',\r\n        '全体大二在校生',\r\n        '全体大三在校生[含专升本]',\r\n        '大三在校生[本]',\r\n        '大三在校生[专]',\r\n        '全体大四在校生[含专升本]',\r\n        '大四在校生[本]',\r\n        '大四在校生[专]'\r\n      ],\r\n      \r\n      // 表单数据\r\n      activityForm: {\r\n        title: '',\r\n        description: '',\r\n        type: '',\r\n        publisherId: 'user123', // 这里应该从用户状态获取\r\n        coverImage: '',\r\n        organizer: '',\r\n        location: '',\r\n        maxParticipants: 100,\r\n        targetAudience: [],\r\n        timeRange: []\r\n      },\r\n      \r\n      // 表单验证规则\r\n      rules: {\r\n        title: [{ required: true, message: '请输入活动标题', trigger: 'blur' }],\r\n        type: [{ required: true, message: '请选择活动类别', trigger: 'change' }],\r\n        organizer: [{ required: true, message: '请输入主办单位', trigger: 'blur' }],\r\n        location: [{ required: true, message: '请输入活动地点', trigger: 'blur' }],\r\n        maxParticipants: [{ required: true, message: '请输入最大报名人数', trigger: 'blur' }],\r\n        timeRange: [{ required: true, message: '请选择活动时间', trigger: 'change' }],\r\n        targetAudience: [{ required: true, message: '请选择活动对象', trigger: 'change' }]\r\n      },\r\n      \r\n      // 原有的社团数据保持不变\r\n      sportsClubs: [\r\n        '瑜伽协会', '译苑棋社', '篮球俱乐部', '武术协会', \r\n        '电子竞技协会', 'SRT沙尘暴滑轮协会', '羽毛球协会',\r\n        '高尔夫俱乐部', '乒乓球协会', '网球协会'\r\n      ],\r\n      serviceClubs: [\r\n        '图书馆学生管理委员会', '国旗班', '爱心协会',\r\n        '希冀环保协会', '红十字会'\r\n      ],\r\n      academicClubs: [\r\n        '红杉科技社', '英语口语尖兵队', '行知调研社', '经贸协会',\r\n        '旅游协会', '辩论协会', '新外语学社', '创业联合协会',\r\n        '大学生心理协会', '西班牙口语尖兵队', '韩语口语尖兵队',\r\n        '日语口语尖兵队'\r\n      ],\r\n      artClubs: [\r\n        '国学研习会', 'Mighty Force街舞研习社', '雏凤诗社',\r\n        'E-LEVEL主持达人队', '动感漫研社', '书画协会',\r\n        '冉飞研习剧社', '桃李文学通讯社', '摄影协会',\r\n        '流行音乐文化社', '魔术协会', '蓝天艺术社'\r\n      ]\r\n    }\r\n  },\r\n  \r\n  methods: {\r\n    // 处理搜索\r\n    handleSearch() {\r\n      // 实现搜索逻辑\r\n    },\r\n    \r\n    // 处理创建活动\r\n    handleCreate() {\r\n      this.dialogTitle = '发布活动'\r\n      this.dialogVisible = true\r\n      this.$nextTick(() => {\r\n        this.$refs.activityForm.resetFields()\r\n      })\r\n    },\r\n    \r\n    // 处理图片上传成功\r\n    handleImageSuccess(res, file) {\r\n      this.activityForm.coverImage = URL.createObjectURL(file.raw)\r\n    },\r\n    \r\n    // 图片上传前的验证\r\n    beforeImageUpload(file) {\r\n      const isJPG = file.type === 'image/jpeg' || file.type === 'image/png'\r\n      const isLt2M = file.size / 1024 / 1024 < 2\r\n\r\n      if (!isJPG) {\r\n        this.$message.error('上传图片只能是 JPG/PNG 格式!')\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error('上传图片大小不能超过 2MB!')\r\n      }\r\n      return isJPG && isLt2M\r\n    },\r\n    \r\n    // 处理表单提交\r\n    handleSubmit() {\r\n      this.$refs.activityForm.validate(async (valid) => {\r\n        if (valid) {\r\n          try {\r\n            const [startTime, endTime] = this.activityForm.timeRange\r\n            const submitData = {\r\n              ...this.activityForm,\r\n              startTime,\r\n              endTime\r\n            }\r\n            delete submitData.timeRange\r\n            \r\n            await publishActivityUsingPost(submitData)\r\n            this.$message.success('活动发布成功')\r\n            this.dialogVisible = false\r\n            // 刷新活动列表\r\n          } catch (error) {\r\n            this.$message.error('活动发布失败')\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.filter-container {\r\n  padding-bottom: 10px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n}\r\n\r\n.club-menu {\r\n  border-right: none;\r\n  height: calc(100vh - 200px);\r\n  overflow-y: auto;\r\n}\r\n\r\n.el-dialog__body {\r\n  padding: 20px 40px;\r\n}\r\n\r\n.upload-text {\r\n  font-size: 12px;\r\n  color: #606266;\r\n  margin-top: 10px;\r\n}\r\n\r\n.el-checkbox-group {\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 1fr);\r\n  gap: 10px;\r\n}\r\n\r\n.avatar-uploader {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n  width: 178px;\r\n}\r\n\r\n.avatar-uploader:hover {\r\n  border-color: #409EFF;\r\n}\r\n\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n</style> "]}]}